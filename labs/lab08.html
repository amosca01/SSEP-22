
<div class="w3-row w3-padding-32">
  <div class="w3-twothird w3-container w3-margin-top">
    <h1 class="w3-text-teal">Lab 8: ColorBrewer and ggthemes (<a href="lab_code/lab-colorbrewer-ggthemes.Rmd" class="w3-text-grey">.Rmd</a>)</h1>

    <p>
      <strong>Goal</strong>: by the end of this lab, you will be able to use <code>colorbrewer</code> and <code>ggthemes</code> to customize the look of your visualization.
    </p>

    <h3 class="w3-text-grey">Setting up</h3>
    <p>
      For this lab, we’re going to be using the <code>ToothGrowth</code> dataset, which is one of the example datasets included in <code>R</code>. It contains data on how fast guinea pigs’ teeth grow if you give them vitamin C supplements in various forms and at various doses. You can learn more about this dataset by typing <code>?ToothGrowth</code> at the console.
    </p>
    <p>
      <img src="img/guinea-pigs.jpeg" width="100%"/>
    </p>
    <p>
      Let’s take a look:
    </p>
    <pre class="r"><code>library(tidyverse)
glimpse(ToothGrowth)</code></pre>
    <pre><code>## Rows: 60
    ## Columns: 3
    ## $ len  &lt;dbl&gt; 4.2, 11.5, 7.3, 5.8, 6.4, 10.0, 11.2, 11.2, 5.2, 7.0, 16.5, 16.5…
    ## $ supp &lt;fct&gt; VC, VC, VC, VC, VC, VC, VC, VC, VC, VC, VC, VC, VC, VC, VC, VC, …
    ## $ dose &lt;dbl&gt; 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 1.0, 1.0, 1.0,…</code></pre>
    <pre class="r"><code>summary(ToothGrowth)</code></pre>
    <pre><code>##       len        supp         dose      
    ##  Min.   : 4.20   OJ:30   Min.   :0.500  
    ##  1st Qu.:13.07   VC:30   1st Qu.:0.500  
    ##  Median :19.25           Median :1.000  
    ##  Mean   :18.81           Mean   :1.167  
    ##  3rd Qu.:25.27           3rd Qu.:2.000  
    ##  Max.   :33.90           Max.   :2.000</code></pre>
    <p>
      Hmm…the <code>dose</code> column looks a little funny. There are only three dosage values <code>[0.5, 1 ,2]</code>, but <code>R</code> is interpreting them as continuous. We can tell <code>R</code> that we want to convert them to categories (a.k.a. <code>factors</code>) using <code>dplyr</code> like this:
    </p>
    <pre class="r"><code>ToothGrowth <- ToothGrowth %>%
      mutate(dose = factor(dose))</code></pre>
    <p>
      Now let’s look again:
    </p>
    <pre class="r"><code>summary(ToothGrowth)</code></pre>
    <pre><code>##       len        supp     dose   
    ##  Min.   : 4.20   OJ:30   0.5:20  
    ##  1st Qu.:13.07   VC:30   1  :20  
    ##  Median :19.25           2  :20  
    ##  Mean   :18.81                   
    ##  3rd Qu.:25.27                   
    ##  Max.   :33.90</code></pre>
    <p>
      Much better! Now let’s draw a graph.
    </p>
  </div>
</div>

<div class="w3-row w3-padding-0">
  <div class="w3-twothird w3-container w3-margin-top">

    <h3 class="w3-text-grey">Drawing a <code>ggplot</code></h3>
    <p>
      Remember the basic recipe for building a plot with <code>ggplot2</code>? Don’t forget to load the library!
    </p>
    <blockquote>
      <p>
        Make a boxplot of the <code>ToothGrowth</code> data, with <code>x = dose</code>, <code>y = len</code>, and <code>fill = dose</code>.<br/> Store it in a variable called <code>my_plot</code>.
      </p>
    </blockquote>
    <pre class="r"><code># sample solution 
my_plot <- ggplot(ToothGrowth, 
                  aes(x = dose, 
                  y = len, 
                  fill = dose)) + 
  geom_boxplot()

my_plot</code></pre>
  </div>
</div>

<div class="w3-row w3-padding-0">
  <div class="w3-twothird w3-container w3-margin-top">

    <h3 class="w3-text-grey">Changing colors manually</h3>
    <p>
      The default colors <code>R</code> selects are okay, but maybe we can do better. Let’s try using colors from the <a href="https://www.smith.edu/about-smith/interactive-style-guide/color-palette">official Smith College Color Palette</a>. We can specify the color values we want using <code>scale_fill_manual()</code> like this:
    </p>
    <pre class="r"><code>my_plot + 
      scale_fill_manual(values = c("#004f71", "#465a01", "#981d97"))</code></pre>
    <p>
      <img src="img/unnamed-chunk-4-1.png" width="100%"/>
    </p>
  </div>
</div>

<div class="w3-row w3-padding-0">
  <div class="w3-twothird w3-container w3-margin-top">

    <h3 class="w3-text-grey">Changing colors with <code>RColorBrewer</code></h3>
    <p>
      That looks pretty nice, but we could spend an awful lot of time making tiny tweaks to color palettes by hand. Luckily Cynthia Brewer over at <a href="http://colorbrewer2.org">ColorBrewer</a> has come up with some really good ones we can borrow! Let’s load the <code>RColorBrewer</code> library and check it out. <strong>Note:</strong> you might need to <code>install.packages('RColorBrewer')</code> if you’re running <code>R</code> on your laptop.
    </p>
    <pre class="r"><code>library(RColorBrewer)
display.brewer.all()</code></pre>
    <p>
      <img src="img/unnamed-chunk-5-1.png" width="100%"/>
    </p>
    <p>
      Ooh, so many choices! We can now use these <code>palettes</code> along with <code>scale_fill_brewer()</code> to make perceptually-optimized plots:
    </p>
    <pre class="r"><code>my_plot + 
      scale_fill_brewer(palette = "Set3")</code></pre>
    <p>
      <img src="img/unnamed-chunk-6-1.png" width="100%"/>
    </p>
    <p>
      That looks a little bit… Valentine-y?
    </p>
    <p>
      <img src="img/hearts.jpeg" width="100%"/>
    </p>
    <blockquote>
      <p>
        Try out a few other color palettes!
      </p>
    </blockquote>
    <pre class="r"><code># sample solution
my_plot + 
  scale_fill_brewer(palette = "Dark2")</code></pre>
    <p>
      <img src="img/unnamed-chunk-7-1.png" width="100%"/>
    </p>
    <p>
      Let's try another. Install the <code>nasaweather</code> package, and load it.
    </p>
    <pre class="r"><code>install.packages("nasaweather")
library(nasaweather)</code></pre>
    <p>
      To make the plot easier to read, we will first filter the <code>storms</code> data frame to include only storms from 1995.
    </p>
    <pre class="r"><code>my_storms <- storms %>%
    filter(year == 1995)</code></pre>
    <p>
      Now, let's plot the storms in <code>my_storms</code>, mapping x to longitude, y to latitude, and color to wind speed. We'll also use a <code>facet_wrap()</code> to make small multiples according to the <code>name</code> of each storm.
    </p>
    <pre class="r"><code>ggplot(my_storms, 
      aes(x = long, 
          y = lat, 
          color = wind)) + 
  geom_point() + 
  facet_wrap(~name)</code></pre>
    <p>
      <img src="img/unnamed-chunk-10-1.png" width="100%"/>
    </p>
    <blockquote>
      <p>
        Do you think a sequential or diverging color scheme is most appropriate for wind speed? Justify your answer.
      </p>
    </blockquote>
  </div>
</div>

<div class="w3-row w3-padding-0">
  <div class="w3-twothird w3-container w3-margin-top">

    <h3 class="w3-text-grey">Stylizing using <code>ggthemes</code></h3>
    <p>
      If we want even more control, we can use the <code>ggthemes</code> package to define not only the color palette, but the overall style of the plot as well. For example, if we want the mimic the style used by the graphic design team at <a href="http://www.economist.com">The Economist</a>, we could say:
    </p>
    <pre class="r"><code>library(ggthemes)
my_plot + 
  theme_economist() + 
  scale_fill_economist()</code></pre>
    <p>
      <img src="img/unnamed-chunk-11-1.png" width="100%"/>
    </p>
    <p>
      Notice how the background changed colors, the axes were re-styled, and the legend changed positions? You can read more about available <code>ggthemes</code> and <code>scales</code> <a href="https://mran.microsoft.com/snapshot/2017-02-04/web/packages/ggthemes/vignettes/ggthemes.html">here</a>.
    </p>
  </div>
</div>
    

<div class="w3-row w3-padding-0">
  <div class="w3-twothird w3-container w3-margin-top">

    <h3 class="w3-text-grey">Putting it all together</h3>
    <p>
      Now it’s time to get creative! There are many more datasets available in <code>R</code>. Let’s take a look at what we’ve got to play with:
    </p>
    <pre class="r"><code>data()</code></pre>
    <p>
      You can learn more about any of the datasets by running <code>?&lt;dataset&gt;</code> at the console (replacing <code>&lt;dataset&gt;</code> with the name of the dataset).
    </p>
    <blockquote>
      <p>
        Use <code>ggplot</code> to draw a plot of any dataset you like, and style it.<br/> Try combining both a theme and a color palette.
      </p>
    </blockquote>  
  </div>
</div>

<div class="w3-row w3-padding-0">
  <div class="w3-twothird w3-container w3-margin-top">
    <p>
      Created by <a href="http://www.science.smith.edu/~bbaumer" target="_blank">Ben Baumer</a> and <a href = "http://www.science.smith.edu/~jcrouser" target="_blank"> R. Jordan Crouser. It was modified for the Smith College SSEP by Ab Mosca in June 2022.
    </p>
  </div>
</div>





