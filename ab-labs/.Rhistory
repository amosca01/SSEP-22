arrange(select(filter(babynames, name == "Ab"), -name), desc(prop))
task <- babynames %>%
filter(name == "Ab") %>%
select(-name) %>%
arrange(desc(prop))
task
library(tidyverse)
library(babynames)
babynames %>%
filter(name == "Ab")
babynames %>%
filter(name == "Ab") %>%
group_by(year)
babynames %>%
filter(name == "Ellis")
babynames %>%
filter(name == "Ellis") %>%
group_by(year)
babynames %>%
filter(name == "Ellis") %>%
group_by(year)
babynames %>%
filter(name == "Ellis") %>%
group_by(year) %>%
summarize(N = n(),
ratio = sum(ifelse(sex == "F", n, 0)) /
sum(ifelse(sex == "M", n, 0)),
howfaroff = abs(1 - ratio)) %>%
filter(N == 2)  %>% # Filter to years where there were M and F babies with name
arrange(howfaroff)
babynames %>%
group_by(year) %>%
summarize(num_births = sum(n)) %>%
arrange(desc(num_births))
babynames %>%
group_by(name) %>%
summarize(earliest = min(year), latest = max(year))
babynames %>%
group_by(name) %>%
summarize(num_appearances = n()) %>%
filter(num_appearances == 276)
babynames %>%
mutate(is_popular = prop >= 0.01) %>%
filter(is_popular == TRUE) %>%
group_by(name) %>%
summarize(earliest = min(year)) %>%
arrange(desc(earliest))
babynames %>%
filter(year >= 1990 & year < 2000) %>%
group_by(name) %>%
summarize(num_births = sum(n)) %>%
arrange(desc(num_births))
library("nycflights13")
install.packages("nycflights13")
library("nycflights13")
head(nycflights13)
head(nycflights13)
library(nycflights13)
head(nycflights13)
head(flights)
flights
View(flights)
flights %>%
group_by(origin & month & day)
flights %>%
group_by(origin)
flights %>%
group_by(origin) %>%
group_by(month) %>%
group_by(day)
flights %>%
group_by(origin) %>%
group_by(month) %>%
group_by(day) %>%
summarize(num_flight = n())
flights %>%
group_by(origin, month, day) %>%
summarize(num_flight = n())
flights %>%
group_by(origin, month, day) %>%
summarize(avg_flight = mean())
flights %>%
group_by(origin, month, day) %>%
summarize(num_flight = n()) %>%
group_by(origin) %>%
summarize(avg_flights = mean(num_flight))
flights %>%
group_by(carrier) %>%
summarize(total_num_flights = n(),
avg_dept_delay = mean(dep_delay),
num_unique_dest = n(dest),
num_unique_planes = n(tailnum))
flights %>%
group_by(carrier) %>%
summarize(total_num_flights = n(),
avg_dept_delay = mean(dep_delay),
num_unique_dest = n_distinct(dest),
num_unique_planes = n_distinct(tailnum))
flights %>%
group_by(origin, month, day) %>%
summarize(avg_delay = mean(dept_delay))
flights %>%
group_by(origin, month, day) %>%
summarize(avg_delay = mean(dep_delay))
delays <- flights %>%
group_by(origin, month, day) %>%
summarize(avg_delay = mean(dep_delay))
delays <- flights %>%
group_by(origin, month, day) %>%
summarize(avg_delay = mean(dep_delay)) %>%
mutate(date = month + day)
delays
delays <- flights %>%
group_by(origin, month, day) %>%
summarize(avg_delay = mean(dep_delay)) %>%
mutate(date = month(month) + day)
delays <- flights %>%
group_by(origin, month, day) %>%
summarize(avg_delay = mean(dep_delay)) %>%
mutate(date = months(month) + day)
delays
delays <- flights %>%
group_by(origin, month, day) %>%
summarize(avg_delay = mean(dep_delay)) %>%
mutate(date = month.name(month) + day)
delays <- flights %>%
group_by(origin, month, day) %>%
summarize(avg_delay = mean(dep_delay)) %>%
mutate(date = month.abb(month) + day)
delays <- flights %>%
group_by(origin, month, day) %>%
summarize(avg_delay = mean(dep_delay)) %>%
mutate(date = month.abb(month))
delays <- flights %>%
group_by(origin, month, day) %>%
summarize(avg_delay = mean(dep_delay))
delays
library(lubridate)
install.packages("lubridate")
delays <- flights %>%
group_by(origin, month, day) %>%
summarize(avg_delay = mean(dep_delay))
knitr::opts_chunk$set(eval = FALSE)
library(tidyverse)
library(babynames)
babynames %>%
filter(name == "Ellis")
babynames %>%
filter(name == "Ellis") %>%
group_by(year)
babynames %>%
filter(name == "Ellis") %>%
group_by(year) %>%
summarize(N = n(),
ratio = sum(ifelse(sex == "F", n, 0)) /
sum(ifelse(sex == "M", n, 0)))
babynames %>%
filter(name == "Ellis") %>%
group_by(year) %>%
summarize(N = n(),
ratio = sum(ifelse(sex == "F", n, 0)) /
sum(ifelse(sex == "M", n, 0)),
howfaroff = abs(1 - ratio)) %>%
filter(N == 2)  %>% # Filter to years where there were M and F babies with name
arrange(howfaroff)
babynames %>%
group_by(year) %>%
summarize(num_births = sum(n)) %>%
arrange(desc(num_births))
babynames %>%
group_by(name) %>%
summarize(earliest = min(year), latest = max(year))
babynames %>%
group_by(name) %>%
summarize(num_appearances = n()) %>%
filter(num_appearances == 276)
babynames %>%
mutate(is_popular = prop >= 0.01) %>%
filter(is_popular == TRUE) %>%
group_by(name) %>%
summarize(earliest = min(year)) %>%
arrange(desc(earliest))
babynames %>%
filter(year >= 1990 & year < 2000) %>%
group_by(name) %>%
summarize(num_births = sum(n)) %>%
arrange(desc(num_births))
library(nycflights13)
library(lubridate)
flights
flights %>%
group_by(origin, month, day) %>%
summarize(num_flight = n()) %>%
group_by(origin) %>%
summarize(avg_flights = mean(num_flight))
flights %>%
group_by(carrier) %>%
summarize(total_num_flights = n(),
avg_dept_delay = mean(dep_delay),
num_unique_dest = n_distinct(dest),
num_unique_planes = n_distinct(tailnum))
delays <- flights %>%
group_by(origin, month, day) %>%
summarize(avg_delay = mean(dep_delay))
delays
delays <- flights %>%
group_by(origin, month, day) %>%
summarize(avg_delay = mean(dep_delay)) %>%
mutate(date = paste(month, "-", day))
delays
delays <- flights %>%
group_by(origin, month, day) %>%
summarize(avg_delay = mean(dep_delay)) %>%
mutate(date = paste0(month, "-", day))
delays
ggplot2(delays, aes(x = date, y = avg_delay, group = origin),
geom_point)
ggplot(delays, aes(x = date, y = avg_delay, group = origin),
geom_point)
ggplot(delays, aes(x = date, y = avg_delay, color = origin),
geom_line)
ggplot(delays, aes(x = date, y = avg_delay, color = origin)) +
geom_line()
ggplot(delays, aes(x = date, y = avg_delay, group = origin)) +
geom_line()
View(delays)
ewr_delays <- delays %>% filter(origin == "EWR")
jfk_delays <- delays %>% filter(origin == "JFK")
lga_delays <- delays %>% filter(origin == "LGA")
ggplot(ewr_delays, aes(x = date, y = avg_delay)) +
geom_histogram()
ggplot(ewr_delays, aes(y = avg_delay)) +
geom_histogram()
ggplot(ewr_delays, aes(x = avg_delay)) +
geom_histogram()
ggplot(jfk_delays, aes(x = avg_delay)) +
geom_histogram()
ggplot(lga_delays, aes(x = avg_delay)) +
geom_histogram()
library(tidyverse)
library(babynames)
head(births)
census_births <- births
census_births %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
ssa_births %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
ssa_births <- babynames
View(ssa_births)
ssa_births %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
ssa_births %>%
group_by(year)
summarize(N = n())
ssa_births %>%
group_by(year)
summarize(N = n(n))
ssa_births %>%
group_by(year)
summarize(N = sum(n))
ssa_births %>%
group_by(year) %>%
summarize(N = sum(n))
View(census_births)
View(ssa_births)
ssa_births <- ssa_births %>%
group_by(year) %>%
summarize(N = sum(n))
View(ssa_births)
census_births %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
ssa_births %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
census_births %>%
inner_join(ssa_births, by = "year") %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
total_births_inner <- census_births %>%
inner_join(ssa_births, by = "year") %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
View(total_births_inner)
total_births_inner %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
total_births_inner <- census_births %>%
inner_join(ssa_births, by = "year")
total_births_inner %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
total_births_left <- census_births %>%
left_join(ssa_births, by = "year")
total_births_left %>%
filter(is.na(births.y))
View(total_births_left)
total_births_left %>%
filter(is.na(births))
census_births %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
ssa_births %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
ssa_births_no_2012 <- ssa_births %>%
filter(year != 2012)
View(ssa_births_no_2012)
total_births_left <- census_births %>%
left_join(ssa_births_no_2012, by = "year")
total_births_left %>%
filter(is.na(births))
total_births_left <- census_births %>%
left_join(ssa_births_no_2012, by = "year")
View(total_births_left)
total_births_left %>%
filter(is.na(N))
total_births_left %>%
filter(is.na(N))
total_births_left <- census_births %>%
left_join(ssa_births, by = "year")
total_births_left %>%
filter(is.na(N))
total_births %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
total_births_left %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
total_births_right <- census_births %>%
right_join(ssa_births, by = "year")
total_births_right %>%
filter(is.na(births))
total_births %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
total_births_right %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
ssa_births %>%
left_join(census_births, by = "year") %>%
filter(is.na(births))
total_births_right <- census_births %>%
right_join(ssa_births_no_2012, by = "year")
total_births_right %>%
filter(is.na(births))
total_births_right %>%
filter(is.na(N))
total_births <- census_births %>%
full_join(ssa_births_no_2012, by = "year")
total_births %>%
filter(is.na(births) | is.na(N))
```{r}
total_births %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
total_births %>%
summarize(N = n(),
correlation = cor(births, N,
use = "complete.obs"))
View(total_births)
total_births %>%
summarize(N = n(),
correlation = cor(births.x, births.y,
use = "complete.obs"))
total_births %>%
summarize(N = n(),
correlation = cor(births, N,
use = "complete.obs"))
total_births %>%
mutate(census_equals_ssa = births == N)
View(total_births)
total_births %>%
mutate(census_equals_ssa = births == N) %>%
filter(census_equals_ssa == TRUE) %>%
summarise(num_different_counts = n())
total_births %>%
mutate(census_equals_ssa = births == N) %>%
filter(census_equals_ssa == FALSE) %>%
summarise(num_different_counts = n())
total_births %>%
summarize(N = n(),
correlation = cor(births, N,
use = "complete"))
rlang::last_error()
total_births %>%
summarize(N = n(),
correlation = cor(births, N,
use = "na.or.complete"))
total_births %>%
summarize(correlation = cor(births, N,
use = "na.or.complete"))
total_births %>%
summarize(N = n(),
correlation = cor(births, N,
use = "na.or.complete"))
total_births %>%
summarize( correlation = cor(births, N,
use = "complete.obs"))
library(ggplot2)
ggplot(data = total_births, aes(x = year, y = births), color = "red") +
geom_line() +
geom_line(aes(y = N), color = "blue")
ggplot(data = total_births, aes(x = year, y = births)) +
geom_line(color = "red") +
geom_line(aes(y = N), color = "blue")
knitr::opts_chunk$set(eval = FALSE)
library(tidyverse)
library(babynames)
head(births)
census_births <- births
ssa_births <- babynames
ssa_births <- ssa_births %>%
group_by(year) %>%
summarize(N = sum(n))
census_births %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
ssa_births %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
total_births_inner <- census_births %>%
inner_join(ssa_births, by = "year")
total_births_inner %>%
summarize(N = n(),
earliest = min(year),
latest = max(year))
total_births_left <- census_births %>%
left_join(ssa_births, by = "year")
total_births_left %>%
filter(is.na(N))
# create a version of ssa_births missing year 2012
ssa_births_no_2012 <- ssa_births %>%
filter(year != 2012)
total_births_left <- census_births %>%
left_join(ssa_births_no_2012, by = "year")
total_births_left %>%
filter(is.na(N))
total_births_right <- census_births %>%
right_join(ssa_births_no_2012, by = "year")
total_births_right %>%
filter(is.na(births))
ssa_births_no_2012 %>%
left_join(census_births, by = "year") %>%
filter(is.na(births))
total_births <- census_births %>%
full_join(ssa_births_no_2012, by = "year")
total_births %>%
filter(is.na(births) | is.na(N))
total_births %>%
mutate(census_equals_ssa = births == N) %>%
filter(census_equals_ssa == FALSE) %>%
summarise(num_different_counts = n())
total_births %>%
summarize( correlation = cor(births, N,
use = "complete.obs"))
library(ggplot2)
ggplot(data = total_births, aes(x = year, y = births)) +
geom_line(color = "red") +
geom_line(aes(y = N), color = "blue")
library(nycflights13)
flights %>%
left_join(airlines, by = c("carrier" = "carrier")) %>%
group_by(name) %>%
summarise(avg_delay = mean(arr_delay, na.rm = TRUE))
flights %>%
left_join(select(airports, faa, name), by = c("dest" = "faa")) %>%
group_by(name) %>%
summarise(num_flights = n()) %>%
top_n(1)
flights %>%
inner_join(planes, by = "tailnum") %>%
group_by(tailnum, manufacturer, model) %>%
summarise(num_flights = n()) %>%
ungroup() %>%
top_n(1, num_flights)
flights %>%
left_join(airports, by = c("dest" = "faa")) %>%
summary()
flights %>%
left_join(planes, by = c("dest" = "faa")) %>%
summary()
flights %>%
left_join(planes, by = c("dest" = "faa")) %>%
summary()
planes
flights
flights
flights %>%
left_join(planes, by = "tailnum") %>%
summary()
